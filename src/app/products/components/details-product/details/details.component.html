<!-- Componente de detalles del producto -->
<div class="bg-white rounded-lg shadow-lg p-8">
  
  <!-- Título del producto -->
  <h1 class="text-3xl font-bold text-gray-900 mb-6">{{ productName() }}</h1>
  
  <!-- Precios -->
  <div class="mb-6">
    <div class="flex items-center space-x-3">
      <span class="text-3xl font-bold text-pink-600">${{ productPrice() }}.00 COP</span>
      @if (pricingData().hasDiscount) {
        <span class="text-xl text-gray-500 line-through">${{ pricingData().originalPrice }}.00 COP</span>
      }
    </div>
  </div>

  <!-- Rating -->
  <div class="flex items-center space-x-2 mb-6">
    <div class="flex text-yellow-400">
      @for (star of [1,2,3,4,5]; track star) {
        <lucide-angular 
          [img]="Star" 
          [class]="'w-5 h-5 ' + (star <= productRating() ? 'fill-current text-yellow-400' : 'text-gray-300')">
        </lucide-angular>
      }
    </div>
    <span class="text-gray-600">{{ productRating() }} (847 reseñas)</span>
  </div>

  <!-- Información del producto -->
  <div class="space-y-3 mb-6">
    <div class="flex items-center space-x-2">
      <span class="text-gray-600">Tamaño:</span>
      <span class="font-medium">{{ productInfo().size }}</span>
    </div>
    
    <div class="flex items-center space-x-2">
      <span class="text-gray-600">Registro Sanitario Invima:</span>
      <span class="font-medium">{{ productInfo().sanitaryRegistration }}</span>
    </div>
    
    <div class="flex items-center space-x-2">
      <span class="text-gray-600">{{ productCategory() }}</span>
      <lucide-angular [img]="brandCategoryIcon()" [class]="'w-5 h-5 ' + brandCategoryColor()"></lucide-angular>
    </div>
  </div>

  <!-- Selector de cantidad -->
  <div class="mb-6">
    <div class="flex items-center space-x-3">
      <span class="text-gray-600">Cantidad:</span>
      <div class="flex items-center border border-gray-300 rounded-lg">
        <button 
          (click)="decreaseQuantity()"
          class="px-3 py-2 text-gray-600 hover:bg-gray-100 rounded-l-lg">
          -
        </button>
        <span class="px-4 py-2 border-x border-gray-300 font-medium">{{ quantity() }}</span>
        <button 
          (click)="increaseQuantity()"
          class="px-3 py-2 text-gray-600 hover:bg-gray-100 rounded-r-lg">
          +
        </button>
      </div>
    </div>
  </div>

  <!-- Botones de acción -->
  <div class="space-y-3 mb-8">
    @if (isProductAvailable()) {
      <button 
        #addToCartButton
        (click)="addToCart()"
        class="w-full bg-pink-600 text-white font-medium py-3 px-4 rounded-lg hover:bg-pink-700 transition-colors duration-200 relative overflow-hidden">
        <span class="relative z-10">Agregar al Carrito</span>
        <!-- Efecto de ondas al hacer clic -->
        <div class="absolute inset-0 bg-white opacity-0 hover:opacity-20 transition-opacity duration-200"></div>
      </button>
    } @else {
      <button 
        disabled
        class="w-full bg-gray-300 text-gray-500 font-medium py-3 px-4 rounded-lg cursor-not-allowed">
        Producto Agotado
      </button>
    }
    
    <!-- <button 
      (click)="toggleFavorite()"
      class="w-full bg-white border border-pink-600 text-pink-600 font-medium py-3 px-4 rounded-lg hover:bg-pink-50 transition-colors duration-200 flex items-center justify-center space-x-2">
      <lucide-angular [img]="Heart" class="w-5 h-5 text-pink-600"></lucide-angular>
      <span>Agregar a Favoritos</span>
    </button> -->
  </div>

  <!-- Badges de confianza -->
  <div class="space-y-3 mb-8">
    <div class="flex items-center space-x-2 text-sm text-gray-600">
      <lucide-angular [img]="Shield" class="w-4 h-4 text-green-600"></lucide-angular>
      <span>Productos Originales & Pago Seguro</span>
    </div>
    <div class="flex items-center space-x-2 text-sm text-gray-600">
      <lucide-angular [img]="FileText" class="w-4 h-4 text-blue-600"></lucide-angular>
      <span>Factura Electrónica</span>
    </div>
    <div class="flex items-center space-x-2 text-sm text-gray-600">
      <lucide-angular [img]="Truck" class="w-4 h-4 text-purple-600"></lucide-angular>
      <span>Envíos Rápidos & Seguros</span>
    </div>
    <div class="flex items-center space-x-2 text-sm text-gray-600">
      <lucide-angular [img]="RotateCcw" class="w-4 h-4 text-orange-600"></lucide-angular>
      <span>Política de Devoluciones</span>
    </div>
  </div>

  <!-- Secciones de acordeón -->
  <div class="space-y-2">
    
    <!-- Descripción del Producto -->
    <div class="border border-gray-200 rounded-lg">
      <button 
        (click)="toggleAccordion('description')"
        class="w-full flex items-center justify-between p-4 text-left hover:bg-gray-50 transition-colors duration-200">
        <span class="font-medium">Descripción del Producto</span>
        <lucide-angular 
          [img]="ChevronDown" 
          [class]="'w-5 h-5 transform transition-transform duration-200 ' + (isAccordionOpen('description') ? 'rotate-180' : '')">
        </lucide-angular>
      </button>
      @if (isAccordionOpen('description')) {
        <div class="px-4 pb-4 text-gray-600">
          {{ accordionContent().description }}
        </div>
      }
    </div>

    <!-- Modo de Uso -->
    <div class="border border-gray-200 rounded-lg">
      <button 
        (click)="toggleAccordion('usage')"
        class="w-full flex items-center justify-between p-4 text-left hover:bg-gray-50 transition-colors duration-200">
        <span class="font-medium">Modo de Uso</span>
        <lucide-angular 
          [img]="ChevronDown" 
          [class]="'w-5 h-5 transform transition-transform duration-200 ' + (isAccordionOpen('usage') ? 'rotate-180' : '')">
        </lucide-angular>
      </button>
      @if (isAccordionOpen('usage')) {
        <div class="px-4 pb-4 text-gray-600">
          {{ accordionContent().usageInstructions }}
        </div>
      }
    </div>

    <!-- Recomendado para -->
    <div class="border border-gray-200 rounded-lg">
      <button 
        (click)="toggleAccordion('recommended')"
        class="w-full flex items-center justify-between p-4 text-left hover:bg-gray-50 transition-colors duration-200">
        <span class="font-medium">Recomendado para</span>
        <lucide-angular 
          [img]="ChevronDown" 
          [class]="'w-5 h-5 transform transition-transform duration-200 ' + (isAccordionOpen('recommended') ? 'rotate-180' : '')">
        </lucide-angular>
      </button>
      @if (isAccordionOpen('recommended')) {
        <div class="px-4 pb-4 text-gray-600">
          {{ accordionContent().recommendedFor }}
        </div>
      }
    </div>

    <!-- Ingredientes & Formulación -->
    <div class="border border-gray-200 rounded-lg">
      <button 
        (click)="toggleAccordion('ingredients')"
        class="w-full flex items-center justify-between p-4 text-left hover:bg-gray-50 transition-colors duration-200">
        <span class="font-medium">Ingredientes & Formulación</span>
        <lucide-angular 
          [img]="ChevronDown" 
          [class]="'w-5 h-5 transform transition-transform duration-200 ' + (isAccordionOpen('ingredients') ? 'rotate-180' : '')">
        </lucide-angular>
      </button>
      @if (isAccordionOpen('ingredients')) {
        <div class="px-4 pb-4 text-gray-600">
          {{ accordionContent().ingredients }}
        </div>
      }
    </div>

    <!-- Alertas & Contraindicaciones -->
    <div class="border border-gray-200 rounded-lg">
      <button 
        (click)="toggleAccordion('warnings')"
        class="w-full flex items-center justify-between p-4 text-left hover:bg-gray-50 transition-colors duration-200">
        <span class="font-medium">Alertas & Contraindicaciones</span>
        <lucide-angular 
          [img]="ChevronDown" 
          [class]="'w-5 h-5 transform transition-transform duration-200 ' + (isAccordionOpen('warnings') ? 'rotate-180' : '')">
        </lucide-angular>
      </button>
      @if (isAccordionOpen('warnings')) {
        <div class="px-4 pb-4 text-gray-600">
          {{ accordionContent().warnings }}
        </div>
      }
    </div>

  </div>

</div>

<!-- Componente de animación del carrito -->
<cart-animation #cartAnimation></cart-animation>